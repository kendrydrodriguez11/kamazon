<div class="max-w-7xl mx-auto px-4 py-8">
    <section class="mb-8 md:mb-12">
        <h2 class="text-2xl md:text-3xl font-bold text-kamazon-sand text-center mb-6 md:mb-8">Categorías</h2>
        <div id="categories-container" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6 md:gap-8">

        </div>
        <template id="category-template">
            <a href="#"
               class="bg-white rounded-xl md:rounded-2xl p-8 md:p-10 text-center shadow-lg hover:-translate-y-2 hover:border-kamazon-teal transition-all cursor-pointer border-2 border-transparent">
                <img src="" alt="" class="w-20 h-20 md:w-28 md:h-28 lg:w-32 lg:h-32 mb-6 md:mb-8 mx-auto object-contain">
                <h3 class="font-bold text-kamazon-sand text-base md:text-xl lg:text-2xl"></h3>
            </a>
        </template>
    </section>
</div>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        fetch('{% url 'api:categories-list' %}')
            .then(response => response.json())
            .then(data => {
                const container = document.getElementById('categories-container');
                const template = document.getElementById('category-template');

                data.forEach(category => {
                    const categoryClone = template.content.cloneNode(true);

                    const imgElement = categoryClone.querySelector('img');
                    imgElement.src = category.image;
                    imgElement.alt = category.name;

                    const titleElement = categoryClone.querySelector('h3');
                    titleElement.textContent = category.name;

                    const linkElement = categoryClone.querySelector('a');
                    linkElement.href = `{% url 'commerce:products-list' %}?category=${category.id}`;

                    linkElement.setAttribute('data-category-id', category.id);
                    linkElement.setAttribute('data-category-name', category.name);

                    container.appendChild(categoryClone);
                });
            })
            .catch(error => {
                console.error('Error al cargar las categorías:', error);

                const container = document.getElementById('categories-container');
                container.innerHTML = `
                <div class="col-span-full text-center py-8">
                    <p class="text-kamazon-sand">Error al cargar las categorías. Por favor, intente nuevamente.</p>
                </div>
            `;
            });
    });
</script>